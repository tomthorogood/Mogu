#!/usr/bin/env python

from src import getCLIArgs
from src import commands

args,conf = getCLIArgs()
command = args.command[0]
db = Redis(args.redis_host, args.redis_port, args.redis_db, args.redis_auth)
args.config = conf

cmd_map = {
        "import"            :   commands._import,
        "import-directory"  :   commands.import_directory,
        "find-orphans"      :   commands.find_orphans,
        "merge-sessions"    :   commands.merge_sessions,
        "export"            :   commands.export_all,
        "export-widget"     :   commands.export_widget,
        "start"             :   commands.start,
        "newfile"           :   commands.newfile,
        "purge-sessions"    :   commands.purge_sessions,
        "delete"            :   commands.delete,
        "init"              :   commands.init,
        "relate"            :   commands.relate,
        "create_config"     :   commands.create_config,
        "find-missing"      :   commands.find_missing_children
        }

if __name__ == "__main__":
    cmd_map(command)(args, db)
